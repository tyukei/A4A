from google.adk.tools.function_tool import FunctionTool

def get_wisdom_profile(topic: str) -> str:
    \"\"\"ユーザーの悩みのトピックに関連する、哲学者、名言、思想キーワード、および洞察を含むプロファイルを提供します。
    
    Args:
        topic: 悩みのトピック（例：'人間関係'、'キャリア'、'孤独'、'幸福'、'死'、'失敗'）
        
    Returns:
        哲学的な知恵の要約（マークダウン形式）
    \"\"\"
    wisdom_db = {
        "人間関係": {
            "philosopher": "マルクス・アウレリウス（ストア派）",
            "keyword": "制御の二分法",
            "quote": "朝起きたら自分に言い聞かせよ。今日、私は、お節介な人間、恩知らずな人間、傲慢な人間、不正直な人間、嫉妬深い人間、不愛想な人間に出会うだろう、と。",
            "insight": "他人の態度は自分のコントロール外にありますが、それに対して自分がどう反応するかは自分で選べます。他人に期待しすぎず、自分の魂の平穏を保つことに集中しましょう。"
        },
        "キャリア": {
            "philosopher": "フリードリヒ・ニーチェ",
            "keyword": "運命愛（アモール・ファティ）",
            "quote": "人間における私の偉大さの公式は、運命愛である。必然的なものをただ耐えるのではなく、またそれを隠すのでもなく、それを愛することだ。",
            "insight": "今の仕事や状況が望んだものではなくても、それを自分の人生に不可欠な一部として肯定することで、苦難を成長の糧に変えることができます。現状を「運命」として引き受け、そこから創造性を発揮しましょう。"
        },
        "孤独": {
            "philosopher": "アルトゥル・ショーペンハウアー",
            "keyword": "精神の自足",
            "quote": "人間は、自分自身と調和している限りにおいて、孤独であっても幸福でありうる。",
            "insight": "孤独は欠乏ではなく、自分自身と向き合い、内面を豊かにするための貴重な機会です。他人の評価に依存せず、自分の中に喜びを見出す力を養いましょう。"
        },
        "幸福": {
            "philosopher": "アリストテレス",
            "keyword": "エウダイモニア（幸福・最高善）",
            "quote": "幸福は自己満足の中にあるのではなく、美徳に基づいた魂の活動の中にある。",
            "insight": "幸福とは一時的な快楽ではなく、自分の能力を最大限に発揮し、善い生き方を追求し続けるプロセスそのものです。今日、どのような「徳（卓越性）」を発揮できるか考えてみましょう。"
        },
        "死": {
            "philosopher": "エピクロス",
            "keyword": "魂の平安（アタラクシア）",
            "quote": "死は我々にとって何ものでもない。なぜなら、我々が存在する限り死は存在せず、死が存在する時には我々はもはや存在しないからだ。",
            "insight": "未知の死を恐れるよりも、今ここにある生をいかに苦痛なく、平穏に楽しむかに知恵を使いましょう。不安の根源を見つめ直すことで、現在の生が輝き始めます。"
        },
        "失敗": {
            "philosopher": "セネカ",
            "keyword": "逆境の試練",
            "quote": "困難は心を鍛え、労働は体を鍛える。最良の人間は、運命が最も過酷に試した人々である。",
            "insight": "失敗や困難は、あなたが不幸である証拠ではなく、あなたが鍛えられ、磨かれているプロセスです。嵐の中でも動じない「内なる城塞」を築くチャンスと考えましょう。"
        }
    }

    data = wisdom_db.get(topic)
    if not data:
        return f"トピック '{topic}' に関する特定の知恵は見つかりませんでしたが、ソクラテスの「無知の知」を思い出してください。自分が何を知らないかを知ることから、新しい探求が始まります。"

    result = f"### 哲学的な知恵の提供\n"
    result += f"- **哲学者**: {data['philosopher']}\n"
    result += f"- **思想キーワード**: {data['keyword']}\n"
    result += f"- **言葉**: 「{data['quote']}」\n"
    result += f"- **深い洞察**: {data['insight']}\n"
    
    return result


# FunctionToolとして登録
get_wisdom_profile_tool = FunctionTool(func=get_wisdom_profile)
